{{#> layout}}
  {{#*inline "pageContent"}}
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f9;
        margin: 0;
        padding: 20px;
      }
      .container {
        max-width: 800px;
        margin: auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        text-align: center;
        color: #333;
      }
      .test-card {
        display: flex;
        align-items: center;
        background: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 25px;
        margin-bottom: 20px;
        padding: 15px;
        cursor: pointer;
        transition: background 0.3s;
      }
      .test-card:hover {
        background: #e0e0e0;
      }
      .test-card img {
        width: 40px;
        height: 40px;
        margin-right: 15px;
      }
      .test-card p {
        margin: 5px 0;
      }
      .test-details {
        display: none;
        margin-top: 15px;
        padding-left: 55px;
      }
      .test-details p {
        margin: 3px 0;
      }
      .test-details a {
        display: inline-block;
        padding: 10px 15px;
        background: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        transition: background 0.3s;
      }
      .test-details a:hover {
        background: #0056b3;
      }
      .pagination {
        text-align: center;
        margin-top: 20px;
      }
      .pagination a {
        display: inline-block;
        margin: 0 5px;
        padding: 10px 15px;
        background: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        transition: background 0.3s;
      }
      .pagination a:hover {
        background: #0056b3;
      }
    </style>
    <script>
      function toggleDetails(testId) {
        const details = document.getElementById('details-' + testId);
        if (details.style.display === 'none' || details.style.display === '') {
          details.style.display = 'block';
        } else {
          details.style.display = 'none';
        }
      }
    </script>
    <div class="container">
      <h1>{{title}}</h1>
      <div class="test-history">
        {{#each tests}}
          <div class="test-card" onclick="toggleDetails({{this.test_id}})">
            <img src="{{#if (eq this.test_type "exam")}}/images/isput.png{{else}}/images/book.png{{/if}}" alt="Test Type">
            <p><strong>ID: {{this.test_id}}</strong></p>
            <p style="text-align: center">{{#if (eq this.test_type "exam")}}Іспит{{else}}За темою {{this.theme.theme_chapter}}{{/if}}</p>
            <p style="margin-left:auto;"><strong>{{this.percentage}}%</strong></p>
          </div>
          <div class="test-details" id="details-{{this.test_id}}">
            <p>Правильні відповіді: <span style="color: green;">{{this.correctAnswers}}</span></p>
            <p>Неправильні відповіді: <span style="color: red;">{{this.incorrectAnswers}}</span></p>
            <p>Без відповідей: <span style="color: grey;">{{this.unansweredQuestions}}</span></p>
            <p>Всього питань: {{this.totalQuestions}}</p>
            <p>Дата: {{formatDate this.test_date}}</p>
            <a href="{{#if (eq this.test_type "exam")}}/tests/exam?test_id={{this.test_id}}{{else}}/tests/themes/test?test_id={{this.test_id}}&theme_id={{this.theme.theme_id}}{{/if}}">
            Переглянути тест
            </a>
          </div>
        {{/each}}
      </div>
<!--      <div class="pagination">-->
<!--        {{#if (gt currentPage 1)}}-->
<!--          <a href="?page={{subtract currentPage 1}}&limit={{limit}}">Previous</a>-->
<!--        {{/if}}-->
<!--        <span>Page {{currentPage}} of {{totalPages}}</span>-->
<!--        {{#if (lt currentPage totalPages)}}-->
<!--          <a href="?page={{add currentPage 1}}&limit={{limit}}">Next</a>-->
<!--        {{/if}}-->
<!--      </div>-->
    </div>
  {{/inline}}
{{/layout}}
